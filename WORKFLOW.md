# 維摩設計 - 終極開發流程

## 🎯 核心概念

採用「本機深度開發 + 雲端協作」的混合架構，最大化開發效率與團隊協作流暢度。

---

## 📍 單兵作戰 (Deep Work)

### 適用場景
- 架構設計
- 複雜代碼撰寫
- 需要極致反應速度的開發工作

### 工作流程

1. **打開本機 Cursor**
   ```bash
   cd /path/to/vimal-hybrid-architecture
   cursor .
   ```

2. **召喚顧問團進行架構設計**
   - 按 `Cmd+L` 開啟 Chat
   - 輸入：`Vimal Review: [你的問題]`
   - 例如：`Vimal Review: 幫我檢查專案結構`
   - AI 會以多角色視角（🛠️ Ken、🚀 Origin、🧘 Master Z 等）提供建議

3. **享受本機 CLI 的極致反應速度**
   - 所有操作都在本機執行，無網路延遲
   - 快速迭代、即時反饋

4. **完成後推送到遠端**
   ```bash
   git add .
   git commit -m "feat: [你的功能描述]"
   git push origin main
   ```

---

## 👥 團隊協作 (Collaboration)

### 適用場景
- 代碼審查
- 快速修復 Bug
- 客戶演示
- 遠端協作

### 工作流程

1. **分享 IDX 連結**
   - 從 Firebase Studio 複製工作區連結
   - 直接分享給隊友或客戶
   - 格式：`https://idx.google.com/vimal-hybrid-38064023`

2. **隊友打開連結**
   - 隊友點擊連結，立即看到最新代碼
   - **環境自動同步**，無需手動 `npm install`
   - IDX 會根據 `.idx/dev.nix` 自動配置環境

3. **隊友直接修改**
   - 在瀏覽器 (IDX) 中直接編輯代碼
   - 修復 Bug、調整樣式、優化邏輯
   - 完成後推送到 GitHub：
     ```bash
     git add .
     git commit -m "fix: [修復描述]"
     git push origin main
     ```

---

## 🔄 同步回來

### 本機開發者同步流程

1. **在本機 Cursor 中拉取更新**
   ```bash
   git pull origin main
   ```

2. **變更無縫接軌**
   - 所有隊友在 IDX 中的修改都會同步到本機
   - 繼續在本機進行深度開發
   - 形成完美的開發循環

---

## 🔁 完整循環示意圖

```
┌─────────────────┐
│  本機 Cursor    │
│  (Deep Work)    │
└────────┬────────┘
         │ git push
         ▼
┌─────────────────┐
│    GitHub       │
│  (單一真實來源)  │
└────────┬────────┘
         │
    ┌────┴────┐
    │         │
    ▼         ▼
┌────────┐ ┌────────┐
│ IDX 1  │ │ IDX 2  │
│隊友/客戶│ │隊友/客戶│
└───┬────┘ └───┬────┘
    │          │
    │ git push │
    └────┬─────┘
         │
         ▼
┌─────────────────┐
│    GitHub       │
└────────┬────────┘
         │ git pull
         ▼
┌─────────────────┐
│  本機 Cursor    │
│  (繼續開發)     │
└─────────────────┘
```

---

## 💡 最佳實踐

### 🛠️ Ken 的建議
- **提交前檢查**：使用 `Vimal Review` 進行代碼審查
- **清晰的提交訊息**：使用 conventional commits 格式
- **定期同步**：每天開始工作前先 `git pull`

### 🚀 Origin 的建議
- **最小化抽象**：保持流程簡單直接
- **快速迭代**：小步快跑，頻繁推送
- **環境一致性**：依賴 `.idx/dev.nix` 確保環境一致

### 🧘 Master Z 的建議
- **減少認知負擔**：流程應該直觀，無需記憶複雜步驟
- **即時協作**：分享連結即可，無需額外配置
- **專注開發**：讓工具處理環境配置，開發者專注代碼

---

## 🎓 新成員入門

1. **閱讀本文檔** - 了解開發流程
2. **閱讀 `.cursorrules`** - 了解 Vimal Advisory Board 規則
3. **克隆專案到本機** - 設置本地開發環境
4. **嘗試 IDX** - 體驗雲端協作環境
5. **第一次提交** - 修復一個小 Bug 或添加文檔

---

## ❓ 常見問題

### Q: IDX 環境和本機環境不一致怎麼辦？
A: 檢查 `.idx/dev.nix` 配置，確保依賴版本一致。IDX 會自動根據配置設置環境。

### Q: 如何確保代碼品質？
A: 使用 `Vimal Review` 進行代碼審查，AI 顧問團會從多個角度提供建議。

### Q: 可以同時在多個 IDX 工作區工作嗎？
A: 可以，每個 IDX 工作區都是獨立的，但都連接到同一個 GitHub 倉庫。

### Q: 本機開發時需要安裝所有依賴嗎？
A: 是的，本機開發需要完整環境。IDX 會自動處理，但本機需要手動 `npm install`。

---

**最後更新**: 2026-01-28
